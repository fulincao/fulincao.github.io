<p>最近了解下wav文件, 记录下wave文件的格式和一些简单的音频处理</p>

<h3 id="格式">格式</h3>
<blockquote>
  <p><a href="https://docs.fileformat.com/audio/wav/">Wav Format</a><br />
<a href="https://www.cnblogs.com/ranson7zop/p/7657874.html">Wave文件格式</a></p>
</blockquote>

<p>wave一般由两部分组成，一部分是头部，一部分是数据</p>

<p><img src="../../assets/img/wave.jpg" alt="WAVE" /></p>

<p>wave文件头部一般如下所示:</p>

<table>
  <thead>
    <tr>
      <th>位置</th>
      <th>一般内容</th>
      <th>解释</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>4 bytes</td>
      <td>“RIFF”</td>
      <td>文件类型格式</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>filesize</td>
      <td>其值为filesize字段后的大小，真正的文件大小为filesize + 8 bytes</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>WAVE</td>
      <td>文件格式</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>“fmt “</td>
      <td>chunk id,fmt即format，这个chunk保存了音频的采样率、声道数、采样位数等关键信息</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>fmt chunk size</td>
      <td>fmt chunk的大小，一般有16/18/20/22/40字节</td>
    </tr>
    <tr>
      <td>2 bytes</td>
      <td>Audio Format</td>
      <td>编码格式代码</td>
    </tr>
    <tr>
      <td>2 bytes</td>
      <td>Num channels</td>
      <td>声道数，一般有1-8</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>Sample Rate</td>
      <td>采样率 48000HZ, 44100HZ</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>Byte Rate</td>
      <td>传输速率，每秒的字节数，计算公式为：采样率<em>channels</em>采样位数/8</td>
    </tr>
    <tr>
      <td>2 bytes</td>
      <td>Block Align</td>
      <td>块对齐，告知播放软件一次性需处理多少字节，公式为： 采样位数*声道数/8</td>
    </tr>
    <tr>
      <td>2 bytes</td>
      <td>Bits Per Sample</td>
      <td>采样位数，一般有8/16/24/32/64，值越大，对声音的还原度越高</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>“data”</td>
      <td>data chunk marker</td>
    </tr>
    <tr>
      <td>4 bytes</td>
      <td>Data Size N</td>
      <td>原始音频数据的大小</td>
    </tr>
    <tr>
      <td>N bytes</td>
      <td>Data</td>
      <td>原始音频数据，音频数字信号</td>
    </tr>
  </tbody>
</table>

<p>这里说明一下，采样率是一秒钟采样的频率，采样位数除以8等于采样宽度，即需要几个字节凑成一个数字信号（小端序带符号)。</p>

<h3 id="代码实现">代码实现</h3>
<p>用python实现读取wav文件</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">MyWave</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wavpath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">wavpath</span> <span class="o">=</span> <span class="n">wavpath</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">wavpath</span><span class="p">,</span> <span class="s">"rb"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">readheader</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">readheader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""https://docs.fileformat.com/audio/wav/"""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">file_kind_marker</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">file_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">file_type_header</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">format_chunk_marker</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">length_above_format_data</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="nb">format</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">channels</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sample_rate</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">byte_rate</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">block_align</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">sample_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">data_chunk_marker</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">data_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s">"little"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getparams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        读取部分参数
        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">channels</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">sample_width</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">sample_rate</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">data_size</span> <span class="o">//</span> <span class="bp">self</span><span class="p">.</span><span class="n">sample_width</span>

    <span class="k">def</span> <span class="nf">readframes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        读取数据转振幅
        """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">44</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">wav_fp</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s">"&lt;i%d"</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">sample_width</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="p">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="音频处理">音频处理</h3>
<p>这里对音频进行简单的振幅，声压以及频谱分析<br />
<strong>振幅</strong>:是指振动的物理量可能达到的最大值，通常以A表示。它是表示振动的范围和强度的物理量。<br />
<strong>声压级</strong>: 声学中，声音的强度定义为声压。计算分贝值时采用20微帕斯卡为参考值[5]。这一参考值是人类对声音能够感知的阈值下限。声压是场量，因此使用声压计算分贝时使用下述版本的公式:</p>

\[\begin{aligned}
L_p = 20\log_{10}(\dfrac{p_{rms}}{p_{ref}}) db
\end{aligned}\]

<p>其中的$p_{ref}$是标准参考声压值20微帕。
在空气中1帕斯卡等于94分贝声压级。在其他介质，如水下，1微帕斯卡更为普遍。这些标准被ANSIS1.1-1994.所收录.</p>

<p><strong>频谱</strong>: 是指一个时域的信号在频域下的表示方式，可以针对信号进行傅里叶变换而得，所得的结果会是分别以幅度及相位为纵轴，频率为横轴的两张图，不过有时也会省略相位的信息，只有不同频率下对应幅度的资料。有时也以“幅度频谱”表示幅度随频率变化的情形，“相位频谱”表示相位随频率变化的情形。
一个声音信号（左图）及其对应的频谱.简单来说，频谱可以表示一个信号是由哪些频率的弦波所组成，也可以看出各频率弦波的大小及相位等信息。</p>

<p>详情见下方的代码</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
</pre></td><td class="rouge-code"><pre>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="s">'''归一化'''</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">8</span> <span class="o">*</span> <span class="bp">self</span><span class="p">.</span><span class="n">sample_width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">data</span> <span class="o">*</span> <span class="n">scale</span>

    <span class="k">def</span> <span class="nf">cal_spl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">seg</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
        <span class="s">'''
        计算声压 db 
        https://zh.m.wikipedia.org/zh-hans/%E5%88%86%E8%B2%9D
        https://en.wikipedia.org/wiki/Sound_pressure
        '''</span>
        <span class="n">data_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">frame_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="p">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">data_len</span> <span class="o">/</span> <span class="n">seg</span><span class="p">))</span>
        <span class="n">volume</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">frame_num</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">frame_num</span><span class="p">):</span>
            <span class="n">curFrame</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">seg</span><span class="p">:</span> <span class="n">i</span><span class="o">*</span><span class="n">seg</span><span class="o">+</span><span class="n">seg</span><span class="p">]</span>
            <span class="n">curFrame</span> <span class="o">=</span> <span class="n">curFrame</span> <span class="o">-</span> <span class="n">np</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">curFrame</span><span class="p">)</span>  <span class="c1"># zero-justified
</span>            <span class="c1"># volume[i] = 10*np.log10(np.sum(curFrame*curFrame))
</span>            <span class="n">prms</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">curFrame</span> <span class="o">*</span> <span class="n">curFrame</span><span class="p">))</span>
            <span class="n">pref</span> <span class="o">=</span> <span class="mf">20e-6</span>  <span class="c1"># 空气中 20微pa，水中 1微pa
</span>            <span class="n">volume</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">log10</span><span class="p">(</span><span class="n">prms</span> <span class="o">/</span> <span class="n">pref</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">volume</span>

    <span class="k">def</span> <span class="nf">cal_spectrum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">seg</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
        <span class="s">"""
        https://zh.m.wikipedia.org/wiki/%E9%A2%91%E8%B0%B1
        计算频谱，傅立叶变换之后计算强度
        """</span>
        <span class="c1"># print("dft begin ")
</span>        <span class="c1"># fft_y = self.fft(data)
</span>        <span class="c1"># fft_y = self.dft(data)
</span>        <span class="n">fft_y</span> <span class="o">=</span> <span class="n">scipy</span><span class="p">.</span><span class="n">fft</span><span class="p">.</span><span class="n">fft</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">fft_y</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">cal_spl</span><span class="p">(</span><span class="n">fft_y</span><span class="p">,</span> <span class="n">seg</span><span class="o">=</span><span class="n">seg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fft_y</span>

<span class="k">def</span> <span class="nf">test_wave</span><span class="p">():</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"0.wav"</span><span class="p">)</span>
    <span class="n">mw</span> <span class="o">=</span> <span class="n">MyWave</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="n">mw</span><span class="p">)</span>

    <span class="c1"># 读取数据
</span>    <span class="n">wav_data</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">readframes</span><span class="p">()</span>
    <span class="n">amplitude</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">wav_data</span><span class="p">)</span>

    <span class="n">nchannels</span><span class="p">,</span> <span class="n">sampwidth</span><span class="p">,</span> <span class="n">framerate</span><span class="p">,</span> <span class="n">nframes</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">getparams</span><span class="p">()</span>
    <span class="n">time1</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">amplitude</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">framerate</span><span class="p">)</span>

    <span class="n">seg</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">20e-3</span> <span class="o">*</span> <span class="n">framerate</span><span class="p">)</span>  <span class="c1"># 20ms 50ms 100ms 常用计算区间
</span>    <span class="n">volume</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">cal_spl</span><span class="p">(</span><span class="n">amplitude</span><span class="p">,</span> <span class="n">seg</span><span class="o">=</span><span class="n">seg</span><span class="p">)</span>
    <span class="n">time2</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">volume</span><span class="p">))</span> <span class="o">*</span> <span class="n">seg</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">framerate</span>

    <span class="n">test_sz</span> <span class="o">=</span> <span class="mi">1024</span>
    <span class="n">fft_y</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">cal_spectrum</span><span class="p">(</span><span class="n">amplitude</span><span class="p">[:</span><span class="n">test_sz</span><span class="p">],</span> <span class="n">seg</span><span class="p">)</span>
    <span class="n">fft_x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">fft_y</span><span class="p">))</span> <span class="o">*</span> <span class="n">seg</span> <span class="o">*</span> <span class="n">framerate</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">amplitude</span><span class="p">)</span>

    <span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">311</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time1</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">312</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time2</span><span class="p">,</span> <span class="n">volume</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">"db"</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>

    <span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">313</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fft_x</span><span class="p">,</span> <span class="n">fft_y</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1">## 完整代码见test_wav.py
</span></pre></td></tr></tbody></table></code></pre></div></div>
